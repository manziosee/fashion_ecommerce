<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Search Results Page -->
    <template id="search_results" name="Search Results">
        <t t-call="website.layout">
            <div id="wrap">
                <section class="container my-5">
                    <div class="row mb-4">
                        <div class="col-12">
                            <h2>Search Results</h2>
                            <t t-if="search_term">
                                <p class="text-muted">Showing results for "<strong t-esc="search_term"/>"</p>
                            </t>
                            <p class="text-info"><t t-esc="total_products"/> products found</p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <!-- Filter Sidebar -->
                        <div class="col-md-3">
                            <div class="filter-sidebar">
                                <h5>Filters</h5>
                                
                                <!-- Category Filter -->
                                <div class="filter-group">
                                    <h6>Category</h6>
                                    <a href="/shop/search" class="filter-option" t-att-class="'active' if not category else ''">All Categories</a>
                                    <a href="/shop/search?category=men" class="filter-option" t-att-class="'active' if category == 'men' else ''">Men's Clothing</a>
                                    <a href="/shop/search?category=women" class="filter-option" t-att-class="'active' if category == 'women' else ''">Women's Clothing</a>
                                    <a href="/shop/search?category=children" class="filter-option" t-att-class="'active' if category == 'children' else ''">Children's Clothing</a>
                                </div>
                                
                                <!-- Brand Filter -->
                                <div class="filter-group">
                                    <h6>Brands</h6>
                                    <t t-foreach="brands" t-as="brand_item">
                                        <a t-att-href="'/shop/search?brand=%s' % brand_item" class="filter-option" t-esc="brand_item"/>
                                    </t>
                                </div>
                                
                                <!-- Color Filter -->
                                <div class="filter-group">
                                    <h6>Colors</h6>
                                    <t t-foreach="colors" t-as="color_item">
                                        <a t-att-href="'/shop/search?color=%s' % color_item" class="filter-option" t-esc="color_item"/>
                                    </t>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Products -->
                        <div class="col-md-9">
                            <div class="row">
                                <t t-foreach="products" t-as="product">
                                    <div class="col-md-4 mb-4">
                                        <div class="card h-100">
                                            <t t-if="product.image_1920">
                                                <img t-att-src="'/web/image/product.template/%s/image_1920/300x300' % product.id" 
                                                     class="card-img-top" style="height: 200px; object-fit: cover;" 
                                                     t-att-alt="product.name"/>
                                            </t>
                                            <div class="card-body">
                                                <h6 class="card-title" t-esc="product.name"/>
                                                <p class="card-text">
                                                    <small class="text-muted">
                                                        <t t-esc="product.brand"/> | <t t-esc="product.color"/>
                                                    </small>
                                                </p>
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <span class="h6 text-primary">$<t t-esc="product.list_price"/></span>
                                                    <form action="/shop/cart/update" method="post">
                                                        <input type="hidden" name="product_id" t-att-value="product.product_variant_id.id"/>
                                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                        <button type="submit" class="btn btn-sm btn-primary">Add to Cart</button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </div>
                            
                            <t t-if="not products">
                                <div class="alert alert-info text-center">
                                    <h4>No products found</h4>
                                    <p>Try adjusting your search criteria or browse our categories.</p>
                                </div>
                            </t>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <!-- Wishlist Page -->
    <template id="wishlist_page" name="My Wishlist">
        <t t-call="website.layout">
            <div id="wrap">
                <section class="container my-5">
                    <div class="row">
                        <div class="col-12">
                            <h2>My Wishlist</h2>
                            <p class="text-muted">Save your favorite items for later</p>
                        </div>
                    </div>
                    
                    <div class="row">
                        <t t-foreach="wishlist_items" t-as="item">
                            <div class="col-md-4 col-lg-3 mb-4">
                                <div class="card h-100">
                                    <t t-if="item.product_image">
                                        <img t-att-src="'/web/image/fashion.wishlist/%s/product_image/300x300' % item.id" 
                                             class="card-img-top" style="height: 200px; object-fit: cover;" 
                                             t-att-alt="item.product_name"/>
                                    </t>
                                    <div class="card-body">
                                        <h6 class="card-title" t-esc="item.product_name"/>
                                        <p class="card-text">
                                            <small class="text-muted">
                                                Brand: <t t-esc="item.product_brand or 'N/A'"/>
                                            </small>
                                        </p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="h6 text-primary">$<t t-esc="item.product_price"/></span>
                                            <div>
                                                <form action="/shop/cart/update" method="post" class="d-inline">
                                                    <input type="hidden" name="product_id" t-att-value="item.product_id.product_variant_id.id"/>
                                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                    <button type="submit" class="btn btn-sm btn-primary">Add to Cart</button>
                                                </form>
                                                <a t-att-href="'/shop/wishlist/remove/%s' % item.id" class="btn btn-sm btn-outline-danger ms-1">
                                                    <i class="fa fa-trash"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>
                    
                    <t t-if="not wishlist_items">
                        <div class="alert alert-info text-center">
                            <h4>Your wishlist is empty</h4>
                            <p>Start adding products to your wishlist by clicking the heart icon on product pages.</p>
                            <a href="/shop" class="btn btn-primary">Continue Shopping</a>
                        </div>
                    </t>
                </section>
            </div>
        </t>
    </template>

    <!-- Error Templates -->
    <template id="validation_error" name="Validation Error">
        <t t-call="website.layout">
            <div id="wrap">
                <section class="container my-5 text-center">
                    <div class="alert alert-warning">
                        <h4>Validation Error</h4>
                        <p t-esc="error"/>
                        <a href="javascript:history.back()" class="btn btn-secondary">Go Back</a>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <template id="general_error" name="General Error">
        <t t-call="website.layout">
            <div id="wrap">
                <section class="container my-5 text-center">
                    <div class="alert alert-danger">
                        <h4>An Error Occurred</h4>
                        <p t-esc="error"/>
                        <a href="/" class="btn btn-primary">Return Home</a>
                    </div>
                </section>
            </div>
        </t>
    </template>
</odoo>